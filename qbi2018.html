<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Nico, QBI-2018</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
      <script src="lib/js/plotly-latest.min.js"></script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
            <section  data-background-image="images/2ColorBeads.jpg">
               <h4>Nanometer accuracy measurements of distances between fluorophores</h4>
               <br><br><br><br><br><br><br>
               <p style="text-align: right; font-size: 24px"><i>QBI 2018<br>Nico Stuurman, Vale lab, UCSF</i></p>
            </section>
            <section>
               <h4>How do Molecular Machines Work?</h4>
               <br>
               <table align="center">
                  <tr><td align="center">Ribosome</td><td align="center">Chromatin</td><td align="center">Dynein</td><!--<td align="center">Kinesin</td>--></tr>
               <tr><td style="vertical-align: middle;"><img style="border: 0px;" width="282" height="225" src="images/Ribosome.jpg"</td>
                  <td style="vertical-align: middle;"><img style="border: 0px;" width="225" height="271" src="images/Chromatin.jpg"</td>
                  <td style="vertical-align: middle;"><img style="border: 0px;" width="228" height="309" src="images/Dynein.jpg"</td>
                  <!--<td><img style="border: 0px;" width="338" height="233" src="images/Kinesin.jpg"</td>  -->
               </tr>
               <tr><td>&nbsp;</td></tr>
            </table>
            </section>

<!--
            <section data-background-image="images/2ColorBeads.jpg">
               <h4>Targeted Fluorescent Labeling of Molecular Machines</h4>
               <br>
               <ul>
                  <li class="fragment highlight-current-green">Fluorescent Proteins</li>
                  <li class="fragment highlight-current-red">Cystein Chemistry (Cys-light constructs)</li>
                  <li class="fragment highlight-current-blue">Amino-terminus</li>
                  <li  class="fragment highlight-current-green">Covalent Binders (Snap-CLIP-Halo)</li>
                  <li  class="fragment highlight-current-red">Unnatural Amino Acids</li>
               </ul>
               <br><br>
               <p style="text-align: left;"> Need bright, photostable fluorescent dyes</p>
            </section>
-->

            <section data-background-image="images/2ColorBeads.jpg">
               <h4>How To Measure Distances?</h4>
               <br>
               <br>
               <ul>
                  <li class="fragment">F&ouml;rster Resonance Energy Transfer (FRET)
                     <ul>
                        <li>~2-8nm, Sensitive to fluorophore orientation</li>
                        <br>
                        <br>
                     </ul>
                  </li>
                  <li class="fragment">Direct distance measurement
                     <ul>
                        <li>Difficult/unreliable, not widely used</li>
                     </ul>
                  </li>
               </ul>
            </section>

            <section>
               <h4>How To Measure Distances?</h4>
               <svg width="100%" height="20%" style="overflow: visible;">
                  <defs>
                     <filter id="blur" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceGraphic" stdDeviation="5" />
                     </filter>
                  </defs>
                  <circle cx="100" cy="100" r="18" stroke-width="0" fill="red" filter="url(#blur)" />
                  <circle cx="800" cy="100" r="18" stroke-width="0" fill="blue" filter="url(#blur)" />
                  <g class="fragment">
                  <text x="400" y="90" fill="white"><tspan>d<tspan dy="4">1</tspan></tspan></text>
                     <line x1="100" y1="100" x2="800" y2="100" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
                  <g class="fragment">
                  <text x="450" y="90" fill="white"><tspan>d<tspan dy="4">2</tspan></tspan></text>
                     <line x1="102" y1="98" x2="804" y2="105" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
                  <g class="fragment">
                  <text x="500" y="90" fill="white"><tspan>d<tspan dy="4">3</tspan></tspan></text>
                     <line x1="92" y1="108" x2="788" y2="96" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
               </svg>
               <div class="fragment current-visible">$$d=\left(\dfrac{\sum_{n=1}^{\infty} d_n}{n}\right)$$</div>

               <svg width="100%" height="20%" style="overflow: visible;">
                  <defs>
                     <radialGradient id="gradRed" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                        <stop offset="0%" style="stop-color:rgb(255,0,0); stop-opacity:1" />
                        <stop offset="100%" style="stop-color:rgb(33,33,33);stop-opacity:0" />
                     </radialGradient> 
                     <radialGradient id="gradBlue" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                        <stop offset="0%" style="stop-color:rgb(0,255,0); stop-opacity:1" />
                        <stop offset="100%" style="stop-color:rgb(33,33,33);stop-opacity:0" />
    </radialGradient> 
                  </defs>
                  <g class="fragment">
                     <circle cx="400" cy="150" r="200" stroke-width="0" fill="url(#gradRed)" />
                     <circle cx="600" cy="150" r="200" stroke-width="0" fill="url(#gradBlue)" />
                  </g>
                  <g class="fragment">
                  <text x="350" y="90" fill="white"><tspan>d<tspan dy="4">1</tspan></tspan></text>
                     <line x1="300" y1="100" x2="700" y2="150" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
                  <g class="fragment">
                     <text x="550" y="90" fill="white"><tspan>d<tspan dy="4">2</tspan></tspan></text>
                     <line x1="450" y1="98" x2="650" y2="105" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
                  <g class="fragment">
                     <text x="500" y="130" fill="white"><tspan>d<tspan dy="4">3</tspan></tspan></text>
                     <line x1="375" y1="175" x2="675" y2="85" style="stroke:rgb(255,255,255);stroke-width:2" />
                  </g>
                  <text class="fragment" x="800" y="200" fill="white" font-size="150">?</text>

               </svg>
            </section>
            <section>
               <h4>How To Measure Distances?</h4>
               <svg width="100%" height="50%" style="overflow: visible;">
                  <g>
                     <circle class="fragment current-visible preload" cx="400" cy="150" r="200" stroke-width="0" fill="url(#gradRed)" />
                     <circle cx="600" cy="150" r="200" stroke-width="0" fill="url(#gradBlue)" />
                  </g>
                  <g class="fragment">
                     <!-- build a cross in the center -->
                     <line x1="380" y1="150" x2="420" y2="150" stroke="white" stroke-width="5" />
                     <line x1="400" y1="130" x2="400" y2="170" stroke="white" stroke-width="5" />
                     <!--                     <circle cx="400" cy="150" r="200" stroke="black" stroke-width="5" stroke-dasharray="10,10" fill="none"  -->
                     <path d="M541 9 A 200 200, 0, 0, 1, 541 291" fill="none" stroke="white" stroke-width="5" stroke-dasharray="10,10" />
                  </g>

                  <line class="fragment" x1="400" y1="150" x2="603" y2="125" style="stroke:rgb(255,255,255);stroke-width:2" />
                  <line class="fragment" x1="400" y1="150" x2="643" y2="185" style="stroke:rgb(255,255,255);stroke-width:2" />
                  <line class="fragment" x1="400" y1="150" x2="586" y2="55" style="stroke:rgb(255,255,255);stroke-width:2" />
                  <line class="fragment" x1="400" y1="150" x2="657" y2="288" style="stroke:rgb(255,255,255);stroke-width:2" />
                  <circle class="fragment" cx="400" cy="150" r="200" stroke-width="0" fill="url(#gradRed)" />
               </svg>
               <br><br>
               <div class="fragment" id="plotAvg" style="margin: auto; width:500px; height:400px"></div> 
               </section>

               <section data-background-image="images/2ColorBeads.jpg">
               <h4>How To Measure Distances?</h4>
               <div style="font-size: 28px;">$$P_2D = \left(\dfrac{r}{&sigma;_d^2}\right)exp\left(\dfrac{-&mu;^2+r^2}{ 2&sigma;_d^2}\right)I_0\left(\dfrac{r&mu;}{&sigma;_d^2}\right)$$
                  <br>
                  <div style="font-size: 24px; text-align: left;">
                     r (measured distance), &mu; (calculated distance), &sigma;<sub>d</sub> (distance uncertainty), <br>I<sub>0</sub> (Bessel function of integer order zero).
                  <br>
                  Churchman et al, PNAS 102 (2005)
                  </div>
               </div>
               <div class="fragment" id="plotAvg2" style="margin: auto; width:500px; height:400px">
               </div> 
               <div class="fragment" id="plotP2D2"></div>
               </section>

               <section>
                  <p>DISTANCE ESTIMATE FROM P<sub>2</sub>D FIT FAILS WHEN <br> &mu; <= &sigma;<sub>d</sub></p>
                  <table>
                  <tr>
                  <td style="vertical-align: middle;"><img style="border: 0px;" width="446" height="350" src="images/Figure_1d.jpg" /></td>
                  <td style="vertical-align: middle;">
                  <div class="fragment" id="plotChP2D" style="width:499px; height:450px;"></div> 
                  <!-- <img class="fragment" style="border: 0px;" width="699" height="453" src="images/Figure_2b.jpg" /> -->
                  </td>
                  </tr>
                  </table>
               </section>

               <section>
                  <h4>Use Uncertainty Information to improve distance estimate</h4>
                  <div>
                  $$&sigma;_d = \sqrt{&sigma;_{reg}^2 + &sigma;_{loc_1}^2 + &sigma;_{loc_2}^2 + &sigma;_{&sigma;_{loc_1}}^2 + &sigma;_{&sigma;_{loc_2}}^2} $$
                  </div>
                  <div id="plotChP2D" style="width:800px; height:450px;"></div>

               </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
      <script src="js/plot-avg.js"></script> 
      <script src="js/plot-avg2.js"></script> 
      <script src="js/plot-chp2d.js"></script> 

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
            // configuration settings
            controls: false,
            transition: 'none',
            center: false,
            // other options ...
            math: {
               mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
               config: 'TeX-AMS_HTML-full'  // See http://docs.mathjax.org/en/latest/config-files.html
            },
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
               { src: 'plugin/math/math.js', async: true }
				]
			});

         // from: https://github.com/hakimel/reveal.js/issues/1784
         // automatically load the initial fragment on a slide if the fragment
         // has been defined with the 'preload' class
         Reveal.addEventListener('slidechanged', function(event) {
           if (event.currentSlide.querySelectorAll('.preload[data-fragment-index="0"]').length > 0) {
             Reveal.nextFragment();
           }
         });

         // if the initial fragment on a slide has been defined with a 'preload' class
         // then transition to the previous slide if the fragment is hidden
         Reveal.addEventListener('fragmenthidden', function(event) {
           if (event.fragment.hasAttribute('data-fragment-index') && event.fragment.classList.contains('preload')) {
             if (event.fragment.attributes['data-fragment-index'].value == "0") {
               Reveal.prev();
             }
           }
            if (event.fragment.id == "plotP2D2") {
               plotAvg(); 
            } 
         });

         Reveal.addEventListener('fragmentshown', function(event) {
            if (event.fragment.id == "plotP2D2") {
               plotP2D(); 
            } 
            if (event.fragment.id == "plotAvg2") {
               plotAvg();
            }
         } );

		</script>
	</body>
</html>
